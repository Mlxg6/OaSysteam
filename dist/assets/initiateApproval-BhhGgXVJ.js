import{r as l,o as f,j as z,w as a,c as k,I as N,Z as I,s as P,b as e,g as U,e as C,G as R}from"./index-CPZCLJhI.js";import{d as B,e as j,_ as A,E as D,b as F,a as M,c as T,v as $}from"./el-table-column-Cw6mIs8X.js";import{E as q}from"./el-input-EJwEnXI7.js";import"./el-popper-CBzjx_xb.js";import{E as G}from"./el-popover-C3aqIG8a.js";import{E as L}from"./el-button-aGybSvRj.js";import{a as O,c as Z,d as H}from"./approval-BgBZ2utT.js";import{E as J}from"./el-dialog-DrTM45KF.js";import"./el-overlay-DNljXtA7.js";import{E as K,a as Q}from"./el-form-item-CvQ51XjY.js";import{d as W}from"./user-IFSiVi_8.js";import{E as X}from"./request-Bo9Nm4OM.js";import"./_plugin-vue_export-helper-C52UWfAG.js";import"./_initCloneObject-CWwr7yUn.js";const Y={__name:"ChannelSelect2",props:{modelValue:{type:[Number,String]},width:{type:String}},emits:["update:modelValue"],setup(y,{emit:m}){const p=l([]),t=l({pageNumber:1,pageSize:100});(async()=>{const _=await O(t.value);p.value=_.data.records})();const i=m;return(_,n)=>{const E=B,v=j;return f(),z(v,{modelValue:y.modelValue,"onUpdate:modelValue":n[0]||(n[0]=s=>i("update:modelValue",s)),size:"large",style:P({width:y.width})},{default:a(()=>[(f(!0),k(N,null,I(p.value,s=>(f(),z(E,{key:s.id,label:s.processName,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","style"])}}},ee={class:"dialog-footer"},te={__name:"ChannelEdit2",emits:["success"],setup(y,{expose:m,emit:p}){const t=l({processId:"",content:""}),d={content:[{required:!0,message:"请输入流程名称",trigger:"blur"}]},i=l([]);(async()=>{const g=await W();i.value=g.data,console.log("审批人数据",g.data)})();const n=l(!1);m({open:()=>{c(),n.value=!0}});const v=p,s=l(),r=async()=>{await s.value.validate(),t.value.processId!==""&&(console.log("参数",t.value),await Z(t.value),v("success"),X({type:"success",message:"添加成功"}),n.value=!1)},c=()=>{n.value=!1,t.value={processId:"",content:""}};return(g,o)=>{const h=q,V=K,S=Q,w=L,x=J;return f(),k("div",null,[e(x,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=u=>n.value=u),title:"添加审批",width:"50%"},{footer:a(()=>[U("div",ee,[e(w,{onClick:c},{default:a(()=>[C("取消")]),_:1}),e(w,{type:"primary",onClick:r},{default:a(()=>[C("确认")]),_:1})])]),default:a(()=>[e(S,{model:t.value,rules:d,"label-width":"100px",style:{"padding-right":"30px"},ref_key:"formRef",ref:s},{default:a(()=>[e(V,{label:"审批内容",prop:"content"},{default:a(()=>[e(h,{modelValue:t.value.content,"onUpdate:modelValue":o[0]||(o[0]=u=>t.value.content=u),minlength:"1",maxlength:"20"},null,8,["modelValue"])]),_:1}),e(V,{label:"选择流程",prop:"formModel.processId"},{default:a(()=>[e(Y,{width:"200px",modelValue:t.value.processId,"onUpdate:modelValue":o[1]||(o[1]=u=>t.value.processId=u)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},fe={__name:"initiateApproval",setup(y){const m=l([]),p=l(0),t=l({pageNumber:1,pageSize:5}),d=l(!1),i=async()=>{d.value=!0;const{data:r}=await H(t.value);console.log("获取发起审批列表",r.initiatedProcessResponseList),m.value=r.initiatedProcessResponseList,p.value=r.total,d.value=!1};i();const _=l(),n=()=>{_.value.open({})},E=r=>{console.log(r),i()},v=r=>{t.value.pageNumber=1,t.value.pageSize=r,i()},s=()=>{i()};return(r,c)=>{const g=L,o=D,h=F,V=G,S=M,w=T,x=A,u=$;return f(),k("div",null,[e(x,{title:"发起审批"},{extra:a(()=>[e(g,{type:"primary",onClick:n},{default:a(()=>[C("发起审批")]),_:1})]),default:a(()=>[R((f(),z(h,{data:m.value,style:{width:"100%"}},{empty:a(()=>[e(S,{description:"没有数据"})]),default:a(()=>[e(o,{prop:"initiatorName",label:"发起人",width:"160"}),e(o,{prop:"processName",label:"流程名称"}),e(o,{prop:"content",label:"审批内容"}),e(o,{prop:"checkStatus",label:"审批结果"}),e(o,{label:"查看审批",width:"150"},{default:a(b=>[e(V,{placement:"left",width:300,trigger:"click"},{reference:a(()=>[e(g,{style:{"margin-right":"16px"}},{default:a(()=>[C("查看")]),_:1})]),default:a(()=>[e(h,{data:b.row.initiatedProcessReceiverResponseList},{default:a(()=>[e(o,{property:"receiverName",label:"审批人"}),e(o,{property:"checkStatus",label:"审批结果"})]),_:2},1032,["data"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[u,d.value]]),e(w,{"current-page":t.value.pageNumber,"onUpdate:currentPage":c[0]||(c[0]=b=>t.value.pageNumber=b),"page-size":t.value.pageSize,"onUpdate:pageSize":c[1]||(c[1]=b=>t.value.pageSize=b),"page-sizes":[2,3,4,5,10],layout:"jumper, total, sizes, prev, pager, next",background:"",total:p.value,onSizeChange:v,onCurrentChange:s,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])]),_:1}),e(te,{ref_key:"dialog",ref:_,onSuccess:E},null,512)])}}};export{fe as default};
