import{r as p,c,b as e,w as t,o as r,e as y,G as A,j as R,g as U,I as w,Z as h,d as j,U as E}from"./index-CPZCLJhI.js";import{_ as P,E as V,b as I,a as M,c as O,v as $}from"./el-table-column-Cw6mIs8X.js";import"./el-input-EJwEnXI7.js";import"./el-popper-CBzjx_xb.js";import{E as F}from"./el-popover-C3aqIG8a.js";import{E as G}from"./el-button-aGybSvRj.js";import{v as Z}from"./_plugin-vue_export-helper-C52UWfAG.js";import{e as q,c as H}from"./affairs-Nss4bU3P.js";import{_ as J}from"./ChannelEdit-CnSdpUkm.js";import{E as K}from"./el-message-box-JObjlNit.js";import"./el-overlay-DNljXtA7.js";import{E as Q}from"./request-Bo9Nm4OM.js";import"./_initCloneObject-CWwr7yUn.js";import"./el-dialog-DrTM45KF.js";import"./el-form-item-CvQ51XjY.js";import"./file-5RXYfRAD.js";import"./user-IFSiVi_8.js";const W=["href"],fe={__name:"initiatedAdmin",setup(X){const _=p([]),f=p(0),l=p({pageNumber:1,pageSize:5}),d=p(!1),i=async()=>{d.value=!0;const{data:o}=await q(l.value);console.log("获取通知列表admin看所有",o.records),_.value=o.records,f.value=o.total,d.value=!1};i();const v=p(),C=()=>{v.value.open({})},x=async o=>{console.log(o),await K.confirm("你确认删除该发起通知吗？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await H(o.id),Q({type:"success",message:"删除成功"}),i()},k=o=>{console.log(o),i()},z=o=>{l.value.pageNumber=1,l.value.pageSize=o,i()},S=()=>{i()};return(o,u)=>{const g=G,a=V,b=I,N=F,B=M,T=O,D=P,L=$;return r(),c("div",null,[e(D,{title:"通知件管理"},{extra:t(()=>[e(g,{type:"primary",onClick:C},{default:t(()=>[y(" 发起通知")]),_:1})]),default:t(()=>[A((r(),R(b,{data:_.value,style:{width:"100%"}},{empty:t(()=>[e(B,{description:"没有数据"})]),default:t(()=>[e(a,{prop:"id",label:"通知ID"}),e(a,{prop:"content",label:"通知内容"}),e(a,{prop:"createTime",label:"创建时间"}),e(a,{label:"文件",width:"80"},{default:t(n=>[U("a",{href:n.row.fileUrl,download:"file"},"去下载",8,W)]),_:1}),e(a,{prop:"importanceDegree",label:"重要程度(1高2中3低)",width:"160"}),e(a,{prop:"initiatorName",label:"发起人姓名"}),e(a,{prop:"title",label:"通知标题"}),e(a,{label:"查看意见",width:"150"},{default:t(n=>[e(N,{placement:"right",width:400,trigger:"click"},{reference:t(()=>[e(g,{style:{"margin-right":"16px"}},{default:t(()=>[y("查看")]),_:1})]),default:t(()=>[e(b,{data:n.row.affairReceiverResponseList},{default:t(()=>[e(a,{width:"80",property:"receiverName",label:"通知人"}),e(a,{width:"150",property:"content",label:"通知备注"},{default:t(m=>[(r(!0),c(w,null,h(m.row.affairOpinionResponseList,s=>(r(),c("div",{key:s.id},E(s.content),1))),128))]),_:1}),e(a,{width:"200",property:"createTime",label:"通知时间"},{default:t(m=>[(r(!0),c(w,null,h(m.row.affairOpinionResponseList,s=>(r(),c("div",{key:s.id},E(s.createTime),1))),128))]),_:1})]),_:2},1032,["data"])]),_:2},1024)]),_:1}),e(a,{label:"操作",width:"200"},{default:t(n=>[e(g,{icon:j(Z),circle:"",plain:"",type:"danger",onClick:m=>x(n.row)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[L,d.value]]),e(T,{"current-page":l.value.pageNumber,"onUpdate:currentPage":u[0]||(u[0]=n=>l.value.pageNumber=n),"page-size":l.value.pageSize,"onUpdate:pageSize":u[1]||(u[1]=n=>l.value.pageSize=n),"page-sizes":[2,3,4,5,10],layout:"jumper, total, sizes, prev, pager, next",background:"",total:f.value,onSizeChange:z,onCurrentChange:S,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])]),_:1}),e(J,{ref_key:"dialog",ref:v,onSuccess:k},null,512)])}}};export{fe as default};
