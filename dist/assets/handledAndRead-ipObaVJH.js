import{r as i,c as N,b as a,w as l,o as g,G as T,j as h,e as d}from"./index-CPZCLJhI.js";import{_ as S,E as $,a as j,b as D,c as L,v as P}from"./el-table-column-Cw6mIs8X.js";import"./el-input-EJwEnXI7.js";import"./el-popper-CBzjx_xb.js";import{E as R}from"./el-button-aGybSvRj.js";import{e as A,f as I,h as M}from"./approval-BgBZ2utT.js";import{E as _}from"./el-message-box-JObjlNit.js";import"./el-overlay-DNljXtA7.js";import{E as f}from"./request-Bo9Nm4OM.js";import"./_plugin-vue_export-helper-C52UWfAG.js";import"./_initCloneObject-CWwr7yUn.js";const Y={__name:"handledAndRead",setup(O){const c=i([]),u=i(0),o=i({pageNumber:1,pageSize:5}),p=i(!1),r=async()=>{p.value=!0;const e=await A(o.value);c.value=e.data.processList,u.value=e.data.total,p.value=!1,console.log("获取待审批列表",e)};r();const v=async(e,s)=>{await _.confirm("你确认审批通过吗？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"});const t=await I({processId:e.id});console.log("审批通过",t),f({message:t.message}),r()},b=async(e,s)=>{await _.confirm("你确认审批拒绝吗？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"});const t=await M({processId:e.id});console.log("审批拒绝",t),f({message:t.message}),r()},w=e=>{o.value.pageNumber=1,o.value.pageSize=e,r()},x=()=>{r()};return(e,s)=>{const t=$,m=R,y=j,E=D,C=L,z=S,B=P;return g(),N("div",null,[a(z,{title:"待审批"},{default:l(()=>[T((g(),h(E,{data:c.value,style:{width:"100%"}},{empty:l(()=>[a(y,{description:"没有数据"})]),default:l(()=>[a(t,{prop:"initiatorName",label:"发起人"}),a(t,{prop:"processName",label:"流程名称"}),a(t,{prop:"content",label:"审批内容"}),a(t,{label:"审批操作",width:"200"},{default:l(n=>[a(m,{type:"primary",onClick:k=>v(n.row,n.$index)},{default:l(()=>[d("通过")]),_:2},1032,["onClick"]),a(m,{type:"danger",onClick:k=>b(n.row,n.$index)},{default:l(()=>[d("拒绝")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[B,p.value]]),a(C,{"current-page":o.value.pageNumber,"onUpdate:currentPage":s[0]||(s[0]=n=>o.value.pageNumber=n),"page-size":o.value.pageSize,"onUpdate:pageSize":s[1]||(s[1]=n=>o.value.pageSize=n),"page-sizes":[2,3,4,5,10],layout:"jumper, total, sizes, prev, pager, next",background:"",total:u.value,onSizeChange:w,onCurrentChange:x,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])]),_:1})])}}};export{Y as default};
