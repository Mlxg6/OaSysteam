import{r as c,o as x,c as z,b as e,w as a,g as j,e as k,u as M,Y as q,d as C,G as F,j as S,V as L}from"./index-CPZCLJhI.js";import{_ as P,E as R,a as G,b as Y,c as H,v as J}from"./el-table-column-Cw6mIs8X.js";import{E as K}from"./el-input-EJwEnXI7.js";import"./el-popper-CBzjx_xb.js";import{E as B}from"./el-button-aGybSvRj.js";import{t as O,v as Q}from"./_plugin-vue_export-helper-C52UWfAG.js";import{i as V,E as N}from"./request-Bo9Nm4OM.js";import{E as W}from"./el-dialog-DrTM45KF.js";import"./el-overlay-DNljXtA7.js";import{E as X,a as Z}from"./el-form-item-CvQ51XjY.js";import{E as ee}from"./el-message-box-JObjlNit.js";import"./_initCloneObject-CWwr7yUn.js";const te=i=>V({url:"position/page",method:"get",params:i}),ne=i=>V({url:"position/save",method:"post",data:i}),h=i=>V({url:"position/save",method:"post",data:i}),oe=i=>V.delete("/position/+".concat(i)),ae={class:"dialog-footer"},le={__name:"ChannelEdit",emits:["success"],setup(i,{expose:b,emit:y}){const t=c({title:"",content:""}),r={title:[{required:!0,message:"请输入内容",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]},u=c(!1);b({open:p=>{u.value=!0,t.value={...p}}});const g=y,E=c(),w=async()=>{await E.value.validate();const p=t.value.id;console.log("id",p),console.log(t.value),await h(t.value),p?await h(t.value):await ne(t.value),g("success"),N({type:"success",message:p?"编辑成功":"添加成功"}),u.value=!1};return(p,l)=>{const _=K,f=X,n=Z,s=B,v=W;return x(),z("div",null,[e(v,{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=o=>u.value=o),title:t.value.id?"编辑":"添加",width:"50%"},{footer:a(()=>[j("div",ae,[e(s,{onClick:l[3]||(l[3]=o=>u.value=!1)},{default:a(()=>[k("取消")]),_:1}),e(s,{type:"primary",onClick:w},{default:a(()=>[k("确认")]),_:1})])]),default:a(()=>[e(n,{model:t.value,rules:r,"label-width":"100px",style:{"padding-right":"30px"},ref_key:"formRef",ref:E},{default:a(()=>[e(f,{label:"部门",prop:"department"},{default:a(()=>[e(_,{modelValue:t.value.department,"onUpdate:modelValue":l[0]||(l[0]=o=>t.value.department=o),minlength:"1",maxlength:"10"},null,8,["modelValue"])]),_:1}),e(f,{label:"名称",prop:"name"},{default:a(()=>[e(_,{modelValue:t.value.name,"onUpdate:modelValue":l[1]||(l[1]=o=>t.value.name=o),minlength:"1",maxlength:"20"},null,8,["modelValue"])]),_:1}),e(f,{label:"描述",prop:"description"},{default:a(()=>[e(_,{modelValue:t.value.description,"onUpdate:modelValue":l[2]||(l[2]=o=>t.value.description=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},be={__name:"position",setup(i){const b=M(),y=c([]),t=c(0),r=c({pageNumber:1,pageSize:5}),u=c(!1),d=async()=>{u.value=!0;const{data:n}=await te(r.value);y.value=n.records,t.value=n.total,u.value=!1};d();const g=c(),E=()=>{g.value.open({})},w=(n,s)=>{console.log(n,s),g.value.open(n)},p=async(n,s)=>{console.log(n,s),await ee.confirm("你确认删除该分类信息吗？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await oe(n.id),N({type:"success",message:"删除成功"}),d()},l=n=>{console.log(n),d()},_=n=>{r.value.pageNumber=1,r.value.pageSize=n,d()},f=()=>{d()};return(n,s)=>{const v=B,o=R,U=G,$=Y,A=H,D=P,T=J;return x(),z("div",null,[e(D,{title:"职位管理"},q({default:a(()=>[F((x(),S($,{data:y.value,style:{width:"100%"}},{empty:a(()=>[e(U,{description:"没有数据"})]),default:a(()=>[e(o,{prop:"id",label:"ID",width:"60"}),e(o,{prop:"department",label:"部门"}),e(o,{prop:"name",label:"名称"}),e(o,{prop:"description",label:"描述"}),C(b).user.username==="admin"?(x(),S(o,{key:0,label:"操作",width:"150"},{default:a(m=>[e(v,{icon:C(O),circle:"",plain:"",type:"primary",onClick:I=>w(m.row,m.$index)},null,8,["icon","onClick"]),e(v,{icon:C(Q),circle:"",plain:"",type:"danger",onClick:I=>p(m.row,m.$index)},null,8,["icon","onClick"])]),_:1})):L("",!0)]),_:1},8,["data"])),[[T,u.value]]),e(A,{"current-page":r.value.pageNumber,"onUpdate:currentPage":s[0]||(s[0]=m=>r.value.pageNumber=m),"page-size":r.value.pageSize,"onUpdate:pageSize":s[1]||(s[1]=m=>r.value.pageSize=m),"page-sizes":[2,3,4,5,10],layout:"jumper, total, sizes, prev, pager, next",background:"",total:t.value,onSizeChange:_,onCurrentChange:f,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])]),_:2},[C(b).user.username==="admin"?{name:"extra",fn:a(()=>[e(v,{type:"primary",onClick:E},{default:a(()=>[k(" 新增职位 ")]),_:1})]),key:"0"}:void 0]),1024),e(le,{ref_key:"dialog",ref:g,onSuccess:l},null,512)])}}};export{be as default};
