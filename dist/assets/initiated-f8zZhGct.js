import{r as u,c as m,b as e,w as t,o as i,e as _,G as R,j,g as A,I as w,Z as h,d as I,U as C}from"./index-CPZCLJhI.js";import{_ as P,E as V,b as F,a as M,c as O,v as G}from"./el-table-column-Cw6mIs8X.js";import"./el-input-EJwEnXI7.js";import"./el-popper-CBzjx_xb.js";import{E as Z}from"./el-popover-C3aqIG8a.js";import{E as q}from"./el-button-aGybSvRj.js";import{v as H}from"./_plugin-vue_export-helper-C52UWfAG.js";import{b as J,c as K,d as Q}from"./affairs-Nss4bU3P.js";import{_ as W}from"./ChannelEdit-CnSdpUkm.js";import{E as X}from"./el-message-box-JObjlNit.js";import"./el-overlay-DNljXtA7.js";import{E as x}from"./request-Bo9Nm4OM.js";import"./_initCloneObject-CWwr7yUn.js";import"./el-dialog-DrTM45KF.js";import"./el-form-item-CvQ51XjY.js";import"./file-5RXYfRAD.js";import"./user-IFSiVi_8.js";const Y=["href"],be={__name:"initiated",setup(ee){const f=u([]),v=u(0),l=u({pageNumber:1,pageSize:5}),g=u(!1),s=async()=>{g.value=!0;const{data:a}=await J(l.value);console.log("获取通知列表",a.records),f.value=a.records,v.value=a.total,g.value=!1};s();const b=u(),E=()=>{b.value.open({})},k=async a=>{console.log(a),await X.confirm("你确认删除该发起通知吗？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await K(a.id),x({type:"success",message:"删除成功"}),s()},z=async(a,p)=>{const r=await Q({id:a.id});console.log("办结",r),x({type:"success",message:r.message})},S=a=>{console.log(a),s()},B=a=>{l.value.pageNumber=1,l.value.pageSize=a,s()},N=()=>{s()};return(a,p)=>{const r=q,o=V,y=F,T=Z,D=M,L=O,U=P,$=G;return i(),m("div",null,[e(U,{title:"发起通知"},{extra:t(()=>[e(r,{type:"primary",onClick:E},{default:t(()=>[_(" 发起通知")]),_:1})]),default:t(()=>[R((i(),j(y,{data:f.value,style:{width:"100%"}},{empty:t(()=>[e(D,{description:"没有数据"})]),default:t(()=>[e(o,{prop:"id",label:"通知ID",width:"70"}),e(o,{prop:"content",label:"通知内容"}),e(o,{prop:"createTime",label:"创建时间",width:"170"}),e(o,{label:"文件",width:"80"},{default:t(n=>[A("a",{href:n.row.fileUrl,download:"file"},"去下载",8,Y)]),_:1}),e(o,{prop:"importanceDegree",label:"重要程度(1高2中3低)",width:"100"}),e(o,{prop:"initiatorName",label:"发起人姓名"}),e(o,{prop:"title",label:"通知标题"}),e(o,{label:"查看意见",width:"80"},{default:t(n=>[e(T,{placement:"right",width:400,trigger:"click"},{reference:t(()=>[e(r,{style:{"margin-right":"16px"}},{default:t(()=>[_("查看")]),_:1})]),default:t(()=>[e(y,{data:n.row.affairReceiverResponseList},{default:t(()=>[e(o,{width:"80",property:"receiverName",label:"通知人"}),e(o,{width:"150",property:"content",label:"通知备注"},{default:t(c=>[(i(!0),m(w,null,h(c.row.affairOpinionResponseList,d=>(i(),m("div",{key:d.id},C(d.content),1))),128))]),_:1}),e(o,{width:"200",property:"createTime",label:"通知时间"},{default:t(c=>[(i(!0),m(w,null,h(c.row.affairOpinionResponseList,d=>(i(),m("div",{key:d.id},C(d.createTime),1))),128))]),_:1})]),_:2},1032,["data"])]),_:2},1024)]),_:1}),e(o,{label:"操作",width:"200"},{default:t(n=>[e(r,{icon:I(H),circle:"",plain:"",type:"danger",onClick:c=>k(n.row)},null,8,["icon","onClick"]),e(r,{style:{"margin-right":"16px"},onClick:c=>z(n.row,n.$index)},{default:t(()=>[_("办结")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,g.value]]),e(L,{"current-page":l.value.pageNumber,"onUpdate:currentPage":p[0]||(p[0]=n=>l.value.pageNumber=n),"page-size":l.value.pageSize,"onUpdate:pageSize":p[1]||(p[1]=n=>l.value.pageSize=n),"page-sizes":[2,3,4,5,10],layout:"jumper, total, sizes, prev, pager, next",background:"",total:v.value,onSizeChange:B,onCurrentChange:N,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])]),_:1}),e(W,{ref_key:"dialog",ref:b,onSuccess:S},null,512)])}}};export{be as default};
