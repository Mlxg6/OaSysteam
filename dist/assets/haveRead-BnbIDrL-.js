import{r as d,c as p,b as e,w as a,o as i,G as B,j as D,g as S,e as L,I as b,Z as w,d as R,U as h}from"./index-CPZCLJhI.js";import{_ as U,E as j,b as P,a as V,c as I,v as M}from"./el-table-column-Cw6mIs8X.js";import"./el-input-EJwEnXI7.js";import"./el-popper-CBzjx_xb.js";import{E as O}from"./el-popover-C3aqIG8a.js";import{E as $}from"./el-button-aGybSvRj.js";import{v as A}from"./_plugin-vue_export-helper-C52UWfAG.js";import{h as F,c as G}from"./affairs-Nss4bU3P.js";import{E as Z}from"./el-message-box-JObjlNit.js";import"./el-overlay-DNljXtA7.js";import{E as q}from"./request-Bo9Nm4OM.js";import"./_initCloneObject-CWwr7yUn.js";const H=["href"],ie={__name:"haveRead",setup(J){const g=d([]),_=d(0),l=d({pageNumber:1,pageSize:5}),m=d(!1),c=async()=>{m.value=!0;const n=await F(l.value);console.log("获取办结通知",n),g.value=n.data.records,_.value=n.data.total,m.value=!1};c();const y=async(n,r)=>{console.log(n,r),await Z.confirm("你确认删除该办结通知？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await G(n.id),q({type:"success",message:"删除成功"}),c()},E=n=>{l.value.pageNumber=1,l.value.pageSize=n,c()},x=()=>{c()};return(n,r)=>{const t=j,f=$,v=P,z=O,C=V,k=I,N=U,T=M;return i(),p("div",null,[e(N,{title:"办结通知"},{default:a(()=>[B((i(),D(v,{data:g.value,style:{width:"100%"}},{empty:a(()=>[e(C,{description:"没有数据"})]),default:a(()=>[e(t,{prop:"id",label:"通知ID"}),e(t,{prop:"content",label:"通知内容"}),e(t,{prop:"createTime",label:"创建时间"}),e(t,{label:"文件",width:"80"},{default:a(o=>[S("a",{href:o.row.fileUrl,download:"file"},"去下载",8,H)]),_:1}),e(t,{prop:"importanceDegree",label:"重要程度(1高2中3低)",width:"160"}),e(t,{prop:"initiatorName",label:"发起人姓名"}),e(t,{prop:"title",label:"通知标题"}),e(t,{label:"查看意见",width:"150"},{default:a(o=>[e(z,{placement:"right",width:400,trigger:"click"},{reference:a(()=>[e(f,{style:{"margin-right":"16px"}},{default:a(()=>[L("查看")]),_:1})]),default:a(()=>[e(v,{data:o.row.affairReceiverResponseList},{default:a(()=>[e(t,{width:"80",property:"receiverName",label:"通知人"}),e(t,{width:"150",property:"content",label:"通知备注"},{default:a(u=>[(i(!0),p(b,null,w(u.row.affairOpinionResponseList,s=>(i(),p("div",{key:s.id},h(s.content),1))),128))]),_:1}),e(t,{width:"200",property:"createTime",label:"通知时间"},{default:a(u=>[(i(!0),p(b,null,w(u.row.affairOpinionResponseList,s=>(i(),p("div",{key:s.id},h(s.createTime),1))),128))]),_:1})]),_:2},1032,["data"])]),_:2},1024)]),_:1}),e(t,{label:"操作",width:"150"},{default:a(o=>[e(f,{icon:R(A),circle:"",plain:"",type:"danger",onClick:u=>y(o.row,o.$index)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[T,m.value]]),e(k,{"current-page":l.value.pageNumber,"onUpdate:currentPage":r[0]||(r[0]=o=>l.value.pageNumber=o),"page-size":l.value.pageSize,"onUpdate:pageSize":r[1]||(r[1]=o=>l.value.pageSize=o),"page-sizes":[2,3,4,5,10],layout:"jumper, total, sizes, prev, pager, next",background:"",total:_.value,onSizeChange:E,onCurrentChange:x,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])]),_:1})])}}};export{ie as default};
